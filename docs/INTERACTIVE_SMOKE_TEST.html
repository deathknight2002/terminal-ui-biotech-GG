<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biotech Terminal - Interactive Smoke Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 100%);
            color: #e0e0e0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(20, 20, 30, 0.9);
            border: 1px solid #00ff88;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 255, 136, 0.1);
        }
        
        h1 {
            color: #00ff88;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 10px;
            font-size: 2em;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
            font-size: 0.9em;
        }
        
        .platform-section {
            background: rgba(30, 30, 45, 0.8);
            border: 1px solid #444;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 25px;
        }
        
        .platform-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #444;
        }
        
        .platform-title {
            color: #00bbff;
            font-size: 1.4em;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .platform-status {
            padding: 6px 15px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: bold;
        }
        
        .status-pending {
            background: #555;
            color: #fff;
        }
        
        .status-pass {
            background: #00ff88;
            color: #000;
        }
        
        .status-fail {
            background: #ff4444;
            color: #fff;
        }
        
        .checklist-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin: 8px 0;
            background: rgba(40, 40, 60, 0.5);
            border-radius: 4px;
            border-left: 3px solid #555;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .checklist-item:hover {
            background: rgba(40, 40, 60, 0.8);
            transform: translateX(5px);
        }
        
        .checklist-item.checked {
            border-left-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }
        
        .checklist-item.failed {
            border-left-color: #ff4444;
            background: rgba(255, 68, 68, 0.1);
        }
        
        .checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #666;
            border-radius: 4px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #222;
            flex-shrink: 0;
        }
        
        .checklist-item.checked .checkbox {
            background: #00ff88;
            border-color: #00ff88;
        }
        
        .checklist-item.failed .checkbox {
            background: #ff4444;
            border-color: #ff4444;
        }
        
        .checkbox::after {
            content: '';
            display: none;
        }
        
        .checklist-item.checked .checkbox::after {
            content: '‚úì';
            color: #000;
            font-weight: bold;
            display: block;
        }
        
        .checklist-item.failed .checkbox::after {
            content: '‚úó';
            color: #fff;
            font-weight: bold;
            display: block;
        }
        
        .item-text {
            flex: 1;
            color: #e0e0e0;
        }
        
        .item-route {
            color: #00bbff;
            font-size: 0.85em;
            margin-left: 10px;
            font-family: monospace;
        }
        
        .timestamp {
            text-align: center;
            color: #666;
            font-size: 0.85em;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #333;
        }
        
        .summary {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
        }
        
        .summary-item {
            text-align: center;
        }
        
        .summary-label {
            color: #888;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        
        .summary-value {
            font-size: 2em;
            font-weight: bold;
        }
        
        .summary-value.passed {
            color: #00ff88;
        }
        
        .summary-value.failed {
            color: #ff4444;
        }
        
        .summary-value.pending {
            color: #888;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-family: inherit;
            font-size: 0.95em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #00ff88;
            color: #000;
        }
        
        .btn-primary:hover {
            background: #00dd77;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
        }
        
        .btn-secondary {
            background: #444;
            color: #fff;
        }
        
        .btn-secondary:hover {
            background: #555;
            transform: translateY(-2px);
        }
        
        .instructions {
            background: rgba(0, 187, 255, 0.1);
            border: 1px solid #00bbff;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
            color: #ccc;
            line-height: 1.6;
        }
        
        .instructions strong {
            color: #00bbff;
        }
        
        .error-code {
            background: rgba(255, 68, 68, 0.2);
            border: 1px solid #ff4444;
            border-radius: 4px;
            padding: 10px;
            margin-top: 10px;
            font-size: 0.9em;
            display: none;
        }
        
        .checklist-item.failed .error-code {
            display: block;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5em;
            }
            
            .platform-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .summary {
                flex-direction: column;
                gap: 15px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî¨ Biotech Terminal</h1>
        <div class="subtitle">Interactive Smoke Test Suite</div>
        
        <div class="instructions">
            <strong>Instructions:</strong> Click on each item as you test it. Green checkmarks indicate passed tests, red X marks indicate failures. Use this alongside your running application to systematically verify all features.
        </div>
        
        <!-- Desktop Platform -->
        <div class="platform-section" id="desktop-section">
            <div class="platform-header">
                <div class="platform-title">üñ•Ô∏è Desktop / Terminal App</div>
                <div class="platform-status status-pending" id="desktop-status">PENDING</div>
            </div>
            
            <div id="desktop-checklist"></div>
        </div>
        
        <!-- Mobile Platform -->
        <div class="platform-section" id="mobile-section">
            <div class="platform-header">
                <div class="platform-title">üì± Mobile App</div>
                <div class="platform-status status-pending" id="mobile-status">PENDING</div>
            </div>
            
            <div id="mobile-checklist"></div>
        </div>
        
        <!-- Summary -->
        <div class="summary">
            <div class="summary-item">
                <div class="summary-label">Passed</div>
                <div class="summary-value passed" id="passed-count">0</div>
            </div>
            <div class="summary-item">
                <div class="summary-label">Failed</div>
                <div class="summary-value failed" id="failed-count">0</div>
            </div>
            <div class="summary-item">
                <div class="summary-label">Pending</div>
                <div class="summary-value pending" id="pending-count">0</div>
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="exportResults()">üìä Export Results</button>
            <button class="btn btn-secondary" onclick="resetTests()">üîÑ Reset All</button>
        </div>
        
        <div class="timestamp" id="timestamp"></div>
    </div>
    
    <script>
        const desktopTests = [
            { text: 'Dashboard loads without errors', route: 'http://localhost:3000/', errorCode: 'E010' },
            { text: 'News page displays articles', route: 'http://localhost:3000/news', errorCode: 'E010' },
            { text: 'Clinical Trials page loads', route: 'http://localhost:3000/trials', errorCode: 'E010' },
            { text: 'Pipeline page renders drug data', route: 'http://localhost:3000/pipeline', errorCode: 'E010' },
            { text: 'Financial Modeling page works', route: 'http://localhost:3000/financial', errorCode: 'E010' },
            { text: 'Market Intelligence displays data', route: 'http://localhost:3000/intelligence', errorCode: 'E010' },
            { text: 'Data Explorer is functional', route: 'http://localhost:3000/explorer', errorCode: 'E010' },
            { text: 'Epidemiology page loads', route: 'http://localhost:3000/science/epidemiology', errorCode: 'E010' },
            { text: 'Catalyst Calendar renders', route: 'http://localhost:3000/catalysts/calendar', errorCode: 'E010' },
            { text: 'Competitors Spiderweb displays', route: 'http://localhost:3000/competitors/spiderweb', errorCode: 'E010' },
            { text: 'Financials Overview page works', route: 'http://localhost:3000/financials/overview', errorCode: 'E010' },
            { text: 'Price Targets page functional', route: 'http://localhost:3000/financials/price-targets', errorCode: 'E010' },
            { text: 'LoE Cliff Analysis displays', route: 'http://localhost:3000/financials/loe-cliff', errorCode: 'E010' },
            { text: 'Console shows no critical errors', route: 'F12 DevTools', errorCode: 'E003' },
            { text: 'Navigation between pages works', route: 'Click multiple pages', errorCode: 'E010' },
            { text: 'Aurora background renders', route: 'Visual check', errorCode: 'E009' },
            { text: 'Responsive design works (1366x768)', route: 'DevTools responsive mode', errorCode: 'E008' },
            { text: 'Theme colors display correctly', route: 'Visual check', errorCode: 'E009' }
        ];
        
        const mobileTests = [
            { text: 'Dashboard loads on mobile', route: 'http://localhost:3002/dashboard', errorCode: 'E007' },
            { text: 'Pipeline page displays on mobile', route: 'http://localhost:3002/pipeline', errorCode: 'E007' },
            { text: 'Trials page renders on mobile', route: 'http://localhost:3002/trials', errorCode: 'E007' },
            { text: 'Financial page loads', route: 'http://localhost:3002/financial', errorCode: 'E007' },
            { text: 'Intelligence page displays', route: 'http://localhost:3002/intelligence', errorCode: 'E007' },
            { text: 'News page renders', route: 'http://localhost:3002/news', errorCode: 'E007' },
            { text: 'Mobile layout is responsive (iPhone 14)', route: 'DevTools device mode', errorCode: 'E007' },
            { text: 'Mobile layout works (iPhone SE)', route: 'DevTools device mode', errorCode: 'E007' },
            { text: 'Hamburger menu opens', route: 'Click menu button', errorCode: 'E007' },
            { text: 'Navigation drawer displays', route: 'Check drawer', errorCode: 'E007' },
            { text: 'Bottom tab bar shows correctly', route: 'Visual check', errorCode: 'E007' },
            { text: 'Tab navigation works', route: 'Tap tabs', errorCode: 'E007' },
            { text: 'Active tab highlighted', route: 'Visual check', errorCode: 'E007' },
            { text: 'Cards stack vertically', route: 'Visual check', errorCode: 'E007' },
            { text: 'Text readable without zoom', route: 'Visual check', errorCode: 'E007' },
            { text: 'Touch targets adequate (44x44pt)', route: 'Tap test', errorCode: 'E007' },
            { text: 'Safe area insets respected', route: 'iPhone X+ notch check', errorCode: 'E007' },
            { text: 'Aurora background renders on mobile', route: 'Visual check', errorCode: 'E007' },
            { text: 'Glass panels display correctly', route: 'Visual check', errorCode: 'E007' },
            { text: 'Charts scale to mobile width', route: 'Visual check', errorCode: 'E007' },
            { text: 'Refresh button works', route: 'Tap refresh', errorCode: 'E007' },
            { text: 'No horizontal scroll', route: 'Swipe test', errorCode: 'E007' },
            { text: 'Landscape mode works', route: 'Rotate device', errorCode: 'E007' }
        ];
        
        let testStates = {
            desktop: {},
            mobile: {}
        };
        
        function createChecklistItem(test, index, platform) {
            const item = document.createElement('div');
            item.className = 'checklist-item';
            item.dataset.platform = platform;
            item.dataset.index = index;
            
            const state = testStates[platform][index] || 'pending';
            if (state === 'checked') {
                item.classList.add('checked');
            } else if (state === 'failed') {
                item.classList.add('failed');
            }
            
            item.innerHTML = `
                <div class="checkbox"></div>
                <div class="item-text">${test.text}</div>
                <div class="item-route">${test.route}</div>
                <div class="error-code">Error ${test.errorCode}: ${test.text} failed. Time: ${new Date().toISOString()}</div>
            `;
            
            item.addEventListener('click', function() {
                cycleState(platform, index, item);
            });
            
            return item;
        }
        
        function cycleState(platform, index, element) {
            const currentState = testStates[platform][index] || 'pending';
            let newState;
            
            if (currentState === 'pending') {
                newState = 'checked';
                element.classList.add('checked');
                element.classList.remove('failed');
            } else if (currentState === 'checked') {
                newState = 'failed';
                element.classList.remove('checked');
                element.classList.add('failed');
            } else {
                newState = 'pending';
                element.classList.remove('checked');
                element.classList.remove('failed');
            }
            
            testStates[platform][index] = newState;
            saveState();
            updateSummary();
            updatePlatformStatus(platform);
        }
        
        function updateSummary() {
            let passed = 0;
            let failed = 0;
            let pending = 0;
            
            for (const platform in testStates) {
                for (const index in testStates[platform]) {
                    const state = testStates[platform][index];
                    if (state === 'checked') passed++;
                    else if (state === 'failed') failed++;
                    else pending++;
                }
            }
            
            // Add untested items to pending
            pending += (desktopTests.length + mobileTests.length) - (passed + failed + pending);
            
            document.getElementById('passed-count').textContent = passed;
            document.getElementById('failed-count').textContent = failed;
            document.getElementById('pending-count').textContent = pending;
        }
        
        function updatePlatformStatus(platform) {
            const tests = platform === 'desktop' ? desktopTests : mobileTests;
            let passed = 0;
            let failed = 0;
            
            for (let i = 0; i < tests.length; i++) {
                const state = testStates[platform][i];
                if (state === 'checked') passed++;
                else if (state === 'failed') failed++;
            }
            
            const statusElement = document.getElementById(`${platform}-status`);
            
            if (failed > 0) {
                statusElement.textContent = `FAILED (${failed} issues)`;
                statusElement.className = 'platform-status status-fail';
            } else if (passed === tests.length) {
                statusElement.textContent = 'ALL PASSED';
                statusElement.className = 'platform-status status-pass';
            } else {
                statusElement.textContent = `${passed}/${tests.length} PASSED`;
                statusElement.className = 'platform-status status-pending';
            }
        }
        
        function saveState() {
            localStorage.setItem('smokeTestStates', JSON.stringify(testStates));
        }
        
        function loadState() {
            const saved = localStorage.getItem('smokeTestStates');
            if (saved) {
                testStates = JSON.parse(saved);
            }
        }
        
        function resetTests() {
            if (confirm('Reset all test results?')) {
                testStates = { desktop: {}, mobile: {} };
                saveState();
                initializeTests();
                updateSummary();
                updatePlatformStatus('desktop');
                updatePlatformStatus('mobile');
            }
        }
        
        function exportResults() {
            const timestamp = new Date().toISOString();
            let report = `Biotech Terminal Smoke Test Report\n`;
            report += `Generated: ${timestamp}\n`;
            report += `=${'='.repeat(60)}\n\n`;
            
            report += `DESKTOP / TERMINAL APP\n`;
            report += `-${'='.repeat(60)}\n`;
            desktopTests.forEach((test, index) => {
                const state = testStates.desktop[index] || 'pending';
                const symbol = state === 'checked' ? '‚úì' : state === 'failed' ? '‚úó' : '‚óã';
                report += `${symbol} ${test.text}\n`;
                report += `  Route: ${test.route}\n`;
                if (state === 'failed') {
                    report += `  Error: ${test.errorCode} - Failed at ${timestamp}\n`;
                }
                report += `\n`;
            });
            
            report += `\nMOBILE APP\n`;
            report += `-${'='.repeat(60)}\n`;
            mobileTests.forEach((test, index) => {
                const state = testStates.mobile[index] || 'pending';
                const symbol = state === 'checked' ? '‚úì' : state === 'failed' ? '‚úó' : '‚óã';
                report += `${symbol} ${test.text}\n`;
                report += `  Route: ${test.route}\n`;
                if (state === 'failed') {
                    report += `  Error: ${test.errorCode} - Failed at ${timestamp}\n`;
                }
                report += `\n`;
            });
            
            // Calculate summary
            let passed = 0, failed = 0, pending = 0;
            for (const platform in testStates) {
                for (const index in testStates[platform]) {
                    const state = testStates[platform][index];
                    if (state === 'checked') passed++;
                    else if (state === 'failed') failed++;
                    else pending++;
                }
            }
            pending += (desktopTests.length + mobileTests.length) - (passed + failed + pending);
            
            report += `\nSUMMARY\n`;
            report += `=${'='.repeat(60)}\n`;
            report += `Total Tests: ${desktopTests.length + mobileTests.length}\n`;
            report += `Passed: ${passed}\n`;
            report += `Failed: ${failed}\n`;
            report += `Pending: ${pending}\n`;
            
            // Download as file
            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `smoke-test-report-${timestamp.replace(/[:.]/g, '-')}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function initializeTests() {
            const desktopChecklist = document.getElementById('desktop-checklist');
            const mobileChecklist = document.getElementById('mobile-checklist');
            
            desktopChecklist.innerHTML = '';
            mobileChecklist.innerHTML = '';
            
            desktopTests.forEach((test, index) => {
                desktopChecklist.appendChild(createChecklistItem(test, index, 'desktop'));
            });
            
            mobileTests.forEach((test, index) => {
                mobileChecklist.appendChild(createChecklistItem(test, index, 'mobile'));
            });
        }
        
        function updateTimestamp() {
            const now = new Date();
            document.getElementById('timestamp').textContent = 
                `Last updated: ${now.toLocaleString()} | Tests are saved automatically`;
        }
        
        // Initialize
        loadState();
        initializeTests();
        updateSummary();
        updatePlatformStatus('desktop');
        updatePlatformStatus('mobile');
        updateTimestamp();
        
        // Update timestamp every minute
        setInterval(updateTimestamp, 60000);
    </script>
</body>
</html>
